////////////////////////////////////////////////////////////////////////////////////////////////////
// C++ header file: term_writer.hxx
//
// This file defines the class `TermWriter` that manages output to terminal.
////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef TERM_WRITER_HXX
#define TERM_WRITER_HXX

#include <cstdio>
#include <map>
#include <string>
#include "string_x.hxx"
#include "text_buffer.hxx"

////////////////////////////////////////////////////////////////////////////////////////////////////
// TermWriter: A class for writing contents to terminal
////////////////////////////////////////////////////////////////////////////////////////////////////
class TermWriter
{
    public:

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Constructors
        ////////////////////////////////////////////////////////////////////////////////////////////

        TermWriter(void);

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Descructors
        ////////////////////////////////////////////////////////////////////////////////////////////

        ~TermWriter(void);

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Member functions
        ////////////////////////////////////////////////////////////////////////////////////////////

        // Write the given contents to the terminal.
        void
        write(const StringX& lhs, const StringX& rhs, TextBuffer::Mode mode, const std::vector<StringX>& clines, const StringX& hist_comp)
        const noexcept;

    private:

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Member variables
        ////////////////////////////////////////////////////////////////////////////////////////////

        // Terminal size.
        unsigned short wid;
        unsigned short hgt;

        // Header line of the prompt.
        StringX prompt_head;

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Private member functions
        ////////////////////////////////////////////////////////////////////////////////////////////

        // Update auxiliary information.
        void
        update(void)
        noexcept;
};

#endif

// vim: expandtab shiftwidth=4 shiftwidth=4 fdm=marker

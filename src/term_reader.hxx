////////////////////////////////////////////////////////////////////////////////////////////////////
// C++ header file: term_reader.hxx
//
// This file defines the class `TermReader` that manages user input from terminal.
////////////////////////////////////////////////////////////////////////////////////////////////////

#ifndef TERM_READER_HXX
#define TERM_READER_HXX

#include <fstream>
#include <termios.h>
#include "string_x.hxx"

////////////////////////////////////////////////////////////////////////////////////////////////////
// TermReader: A class for reading characters from a terminal
////////////////////////////////////////////////////////////////////////////////////////////////////
class TermReader
{
    public:

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Constructors
        ////////////////////////////////////////////////////////////////////////////////////////////

        TermReader(void);

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Destructors
        ////////////////////////////////////////////////////////////////////////////////////////////

        ~TermReader(void);

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Member functions
        ////////////////////////////////////////////////////////////////////////////////////////////

        CharX getch(void) noexcept;

    private:

        ////////////////////////////////////////////////////////////////////////////////////////////
        // Member variables
        ////////////////////////////////////////////////////////////////////////////////////////////

        // File descriptor to read input characters.
        int fd;

        // Copy of the original termios. This class changes the termios, and this member variable
        // is used to save the original termios and restore when this class is deleted.
        struct termios term;
};

#endif

// vim: expandtab shiftwidth=4 shiftwidth=4 fdm=marker
